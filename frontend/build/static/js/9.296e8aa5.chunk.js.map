{"version":3,"sources":["../node_modules/react-bootstrap/esm/Table.js","actions/favouriteActions.js","views/favourites.js"],"names":["Table","React","forwardRef","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","addToFavouriteAction","id","user","dispatch","getState","a","type","FAVOURITE_ADD_REQUEST","userInfo","userLogin","config","headers","Authorization","token","axios","post","data","FAVOURITE_ADD_SUCCESS","payload","message","response","FAVOURITE_ADD_FAIL","deleteFavouriteAction","FAVOURITE_REMOVE_REQUEST","delete","FAVOURITE_REMOVE_SUCCESS","FAVOURITE_REMOVE_FAIL","listMyFavourite","FAVOURITE_REQUEST","get","FAVOURITE_SUCCESS","FAVOURITE_FAIL","FavouriteScreen","history","useDispatch","myFavourite","useSelector","state","loadingfavourites","loading","errorfavourites","error","mfavourites","addHistory","success","useEffect","deleteHandler","window","confirm","go","addToHistoryHandler","addToHistoryAction","map","favourites","width","height","alt","product","goods_name","src","goods_pic","goods_price","to","_id","onClick"],"mappings":"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","file":"static/js/9.296e8aa5.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import {\r\n    FAVOURITE_ADD_REQUEST,\r\n    FAVOURITE_ADD_SUCCESS,\r\n    FAVOURITE_ADD_FAIL,\r\n    // FAVOURITE_ADD_RESET,\r\n    FAVOURITE_REMOVE_REQUEST,\r\n    FAVOURITE_REMOVE_SUCCESS,\r\n    FAVOURITE_REMOVE_FAIL,\r\n    FAVOURITE_REQUEST,\r\n    FAVOURITE_SUCCESS,\r\n    FAVOURITE_FAIL,\r\n  } from \"../constants/favouriteConstants\";\r\nimport axios from \"axios\";\r\n\r\nexport const addToFavouriteAction = (id ,user ) => async (dispatch,getState) => {\r\n    try {\r\n      dispatch({\r\n        type: FAVOURITE_ADD_REQUEST,\r\n      });\r\n  \r\n      const {\r\n        userLogin: { userInfo },\r\n      } = getState();\r\n  \r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      };\r\n  \r\n      const { data } = await axios.post(`/api/favourite/goods/${id}`, user, config);\r\n  \r\n      dispatch({\r\n        type: FAVOURITE_ADD_SUCCESS,\r\n        payload: data,\r\n      });\r\n    } catch (error) {\r\n      const message =\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message;\r\n      dispatch({\r\n        type: FAVOURITE_ADD_FAIL,\r\n        payload: message,\r\n      });\r\n    }\r\n  };\r\n\r\n  export const deleteFavouriteAction = (id) => async (dispatch, getState) => {\r\n    try {\r\n      dispatch({\r\n        type: FAVOURITE_REMOVE_REQUEST,\r\n      });\r\n  \r\n      const {\r\n        userLogin: { userInfo },\r\n      } = getState();\r\n  \r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      };\r\n  \r\n      const { data } = await axios.delete(`/api/favourite/goods/${id}`, config);\r\n  \r\n      dispatch({\r\n        type: FAVOURITE_REMOVE_SUCCESS,\r\n        payload: data,\r\n      });\r\n    } catch (error) {\r\n      const message =\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message;\r\n      dispatch({\r\n        type: FAVOURITE_REMOVE_FAIL,\r\n        payload: message,\r\n      });\r\n    }\r\n  };\r\n\r\n  export const listMyFavourite = () => async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: FAVOURITE_REQUEST })\r\n      const {\r\n        userLogin: { userInfo },\r\n      } = getState()\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      }\r\n      const { data } = await axios.get(`/api/favourite/myfavourite`, config)\r\n  \r\n      dispatch({ type: FAVOURITE_SUCCESS, payload: data })\r\n    } catch (error) {\r\n      dispatch({\r\n        type: FAVOURITE_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      })\r\n    }\r\n  }","/* eslint-disable react-hooks/rules-of-hooks */\r\nimport React, { useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Button, Table } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport ErrorMessage from '../components/ErrorMessage'\r\nimport Loading from '../components/Loading'\r\n// import { listOrders, deleteOrder } from '../actions/orderAction'\r\nimport { listMyFavourite,deleteFavouriteAction  } from '../actions/favouriteActions'\r\nimport {\r\n  addToHistoryAction\r\n} from '../actions/historyAction.js'\r\n\r\nconst FavouriteScreen = ({ history }) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const  myFavourite = useSelector((state) => state.myFavourite)\r\n  const { loading: loadingfavourites, error: errorfavourites, mfavourites } =  myFavourite\r\n\r\n  const userLogin = useSelector((state) => state.userLogin)\r\n  const { userInfo } = userLogin\r\n\r\n  const addHistory = useSelector((state) => state.addHistory);\r\n  const { success: successaddhistory,\r\n    error: erroraddhistory } = addHistory;\r\n\r\n  useEffect(() => {\r\n        dispatch(listMyFavourite())\r\n  }, [dispatch, history, userInfo])\r\n\r\n\r\n\r\n  const deleteHandler = async (id) => {\r\n    if (window.confirm('Are you sure ?')) {\r\n      dispatch(deleteFavouriteAction(id))\r\n      history.go(0)\r\n    }\r\n  }\r\n\r\n  const addToHistoryHandler = async (id, user) => {\r\n    dispatch(addToHistoryAction(id,user))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h1 className='mt-5'>My Favourites</h1>\r\n          {loadingfavourites ? (\r\n          <Loading />\r\n        ) : errorfavourites ? (\r\n          <ErrorMessage variant='danger'>{errorfavourites}</ErrorMessage>\r\n        ) : (\r\n          <Table striped bordered hover responsive className='tabel-sm'>\r\n            <thead>\r\n              <tr>\r\n                <th>Photo</th>\r\n                <th>Name</th>\r\n                {/* <th>Create Date</th>\r\n                <th>Latest Transaction</th> */}\r\n                <th>Price</th>\r\n                {/* <th>Count In Stock</th>\r\n                <th>Sales</th> */}\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {mfavourites.map((favourites) => (\r\n                <tr key={favourites._id}>\r\n                  <td>\r\n                    {' '}\r\n                    <img\r\n                      width='50'\r\n                      height='50'\r\n                      alt={favourites.product && favourites.product.goods_name}\r\n                      src={favourites.product && favourites.product.goods_pic}\r\n                    />{' '}\r\n                  </td>\r\n                  <td>{favourites.product && favourites.product.goods_name}</td>\r\n                  <td>${favourites.product && favourites.product.goods_price}</td>\r\n                  <td>\r\n                    <LinkContainer to={`/goods/${favourites.product && favourites.product._id}`} onClick={() => addToHistoryHandler(favourites.product && favourites.product._id,userInfo._id)}>\r\n                      <Button className='btn-sm' variant='light'>\r\n                        Details\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button\r\n                      variant='danger'\r\n                      className='btn-sm'\r\n                      onClick={() => deleteHandler(favourites.product && favourites.product._id)}\r\n                    >\r\n                      <i className='fas fa-trash'>Delete</i>\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FavouriteScreen"],"sourceRoot":""}