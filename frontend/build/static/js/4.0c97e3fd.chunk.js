(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{159:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return p})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return j}));var n=r(10),a=r(9),s=r.n(a),c=r(12),i=r.n(c),o=r(46),d=function(e,t){return function(){var r=Object(n.a)(s.a.mark((function r(n,a){var c,d;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.get("/api/goods/".concat(e));case 2:c=r.sent,d=c.data,n({type:o.a,payload:{product:d._id,name:d.goods_name,image:d.goods_pic,price:d.goods_price,countInStock:d.countInStock,qty:t}}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},u=function(e){return function(t,r){t({type:o.c,payload:e}),localStorage.setItem("cartItems",JSON.stringify(r().cart.cartItems))}},p=function(){return function(){var e=Object(n.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("cartItems"),t({type:o.b});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l=function(e){return function(t){t({type:o.e,payload:e}),localStorage.setItem("shippingAddress",JSON.stringify(e))}},j=function(e){return function(t){t({type:o.d,payload:e}),localStorage.setItem("paymentMethod",JSON.stringify(e))}}},161:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"g",(function(){return p})),r.d(t,"c",(function(){return l})),r.d(t,"e",(function(){return j})),r.d(t,"f",(function(){return h})),r.d(t,"b",(function(){return b}));var n=r(10),a=r(9),s=r.n(a),c=r(12),i=r.n(c),o=r(11),d=function(e){return function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,c,d,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:o.b}),a=n(),c=a.userLogin.userInfo,d={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.post("/api/orders",e,d);case 6:u=t.sent,p=u.data,r({type:o.c,payload:p}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:o.a,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},u=function(e){return function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,c,d,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:o.l}),a=n(),c=a.userLogin.userInfo,d={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.get("/api/orders/".concat(e),d);case 6:u=t.sent,p=u.data,r({type:o.m,payload:p}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:o.k,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,c,d,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:o.v}),a=n(),c=a.userLogin.userInfo,d={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.put("/api/orders/".concat(e._id,"/pay"),{},d);case 6:u=t.sent,p=u.data,r({type:o.x,payload:p}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:o.u,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,c,d,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:o.h}),a=n(),c=a.userLogin.userInfo,d={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.put("/api/orders/".concat(e._id,"/delivered"),{},d);case 6:u=t.sent,p=u.data,r({type:o.j,payload:p}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:o.g,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message}),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}()},j=function(){return function(){var e=Object(n.a)(s.a.mark((function e(t,r){var n,a,c,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:o.p}),n=r(),a=n.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(a.token)}},e.next=6,i.a.get("/api/orders/myorders",c);case 6:d=e.sent,u=d.data,t({type:o.r,payload:u}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:o.o,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()},h=function(){return function(){var e=Object(n.a)(s.a.mark((function e(t,r){var n,a,c,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:o.s}),n=r(),a=n.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(a.token)}},e.next=6,i.a.get("/api/orders",c);case 6:d=e.sent,u=d.data,t({type:o.t,payload:u}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:o.n,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,c,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:o.e}),a=n(),c=a.userLogin.userInfo,d={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.delete("/api/orders/".concat(e),d);case 6:r({type:o.f}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:o.d,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r){return t.apply(this,arguments)}}()}},166:function(e,t,r){"use strict";var n=r(2),a=r(3),s=r(5),c=r.n(s),i=r(0),o=r.n(i),d=(r(45),r(31)),u=r(6),p=r(78),l=r(77),j=r(22),h={variant:void 0,active:!1,disabled:!1},b=o.a.forwardRef((function(e,t){var r=e.bsPrefix,s=e.active,d=e.disabled,p=e.className,h=e.variant,b=e.action,f=e.as,m=e.eventKey,O=e.onClick,x=Object(a.a)(e,["bsPrefix","active","disabled","className","variant","action","as","eventKey","onClick"]);r=Object(u.a)(r,"list-group-item");var v=Object(i.useCallback)((function(e){if(d)return e.preventDefault(),void e.stopPropagation();O&&O(e)}),[d,O]);return o.a.createElement(l.a,Object(n.a)({ref:t},x,{eventKey:Object(j.b)(m,x.href),as:f||(b?x.href?"a":"button":"div"),onClick:v,className:c()(p,r,s&&"active",d&&"disabled",h&&r+"-"+h,b&&r+"-action")}))}));b.defaultProps=h,b.displayName="ListGroupItem";var f=b,m={variant:void 0,horizontal:void 0},O=o.a.forwardRef((function(e,t){var r,s=Object(d.a)(e,{activeKey:"onSelect"}),i=s.className,l=s.bsPrefix,j=s.variant,h=s.horizontal,b=s.as,f=void 0===b?"div":b,m=Object(a.a)(s,["className","bsPrefix","variant","horizontal","as"]),O=Object(u.a)(l,"list-group");return r=h?!0===h?"horizontal":"horizontal-"+h:null,o.a.createElement(p.a,Object(n.a)({ref:t},m,{as:f,className:c()(i,O,j&&O+"-"+j,r&&O+"-"+r)}))}));O.defaultProps=m,O.displayName="ListGroup",O.Item=f;t.a=O},181:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(152),s=r(99),c=r(166),i=r(153),o=r(27),d=r(100),u=r(16),p=r(43),l=r(42),j=r(21),h=r(161),b=r(159),f=r(1);t.default=function(e){var t,r=e.match,m=e.history,O=r.params.id,x=Object(u.b)(),v=Object(u.c)((function(e){return e.orderDetails})),y=v.order,g=v.loading,k=v.error,I=Object(u.c)((function(e){return e.orderDeliver})),w=I.loading,P=(I.success,Object(u.c)((function(e){return e.orderPay}))),A=P.loading,N=(P.success,P.error),S=Object(u.c)((function(e){return e.userLogin})).userInfo;if(!g){y.itemsPrice=(t=y.orderItems.reduce((function(e,t){return e+t.price*t.qty}),0),(Math.round(100*t)/100).toFixed(2))}Object(n.useEffect)((function(){S||m.push("/login"),N&&(m.go(0),alert("Payment Failed! Check your wallet!")),x(Object(h.d)(O))}),[x,O,N,m,S]);var z=function(){x(Object(h.g)(y)),m.go(0),x(Object(b.b)())};return g?Object(f.jsx)(p.a,{}):k?Object(f.jsx)(l.a,{variant:"danger",children:k}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h1",{className:"mt-5",children:["Order",y._id]}),Object(f.jsxs)(a.a,{children:[Object(f.jsx)(s.a,{md:8,children:Object(f.jsxs)(c.a,{variant:"flush",children:[Object(f.jsxs)(c.a.Item,{children:[Object(f.jsx)("h2",{children:"Shipping"}),Object(f.jsxs)("p",{children:[" ",Object(f.jsx)("strong",{children:"Name: "})," ",y.user.name," "]}),Object(f.jsxs)("p",{children:[" ",Object(f.jsx)("strong",{children:"Email: "})," ",Object(f.jsx)("a",{href:"mailto: ".concat(y.user.email),children:y.user.email})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Address:"}),y.shippingAddress.address,", ",y.shippingAddress.city,","," ",y.shippingAddress.postalCode,","," ",y.shippingAddress.address,", ",y.shippingAddress.country]}),y.isDelivered?Object(f.jsxs)(l.a,{variant:"success",children:["Delivered on ",y.deliveredAt]}):Object(f.jsx)(l.a,{variant:"danger",children:"Not Delivered"})]}),Object(f.jsxs)(c.a.Item,{children:[Object(f.jsx)("h2",{children:"Payment Method"}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Method: "}),y.paymentMethod]}),y.isPaid?Object(f.jsxs)(l.a,{variant:"success",children:["Paid on ",y.paidAt]}):Object(f.jsx)(l.a,{variant:"danger",children:"Not Paid"})]}),Object(f.jsxs)(c.a.Item,{children:[Object(f.jsx)("h2",{children:"Order Items"}),0===y.orderItems.length?Object(f.jsx)(l.a,{children:"Order Is Empty"}):Object(f.jsx)(c.a,{variant:"flush",children:y.orderItems.map((function(e,t){return Object(f.jsx)(c.a.Item,{children:Object(f.jsxs)(a.a,{children:[Object(f.jsx)(s.a,{md:1,children:Object(f.jsx)(i.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(f.jsx)(s.a,{children:Object(f.jsx)(j.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(f.jsxs)(s.a,{md:4,children:[e.qty," x ",e.price," = $",e.qty*e.price]})]})},t)}))})]})]})}),Object(f.jsx)(s.a,{md:4,children:Object(f.jsx)(o.a,{children:Object(f.jsxs)(c.a,{variant:"flush",children:[Object(f.jsx)(c.a.Item,{children:Object(f.jsx)("h2",{children:"Order Summary"})}),Object(f.jsx)(c.a.Item,{children:Object(f.jsxs)(a.a,{children:[Object(f.jsx)(s.a,{children:"Items"}),Object(f.jsxs)(s.a,{children:["$",y.itemsPrice]})]})}),Object(f.jsx)(c.a.Item,{children:Object(f.jsxs)(a.a,{children:[Object(f.jsx)(s.a,{children:"Shipping"}),Object(f.jsxs)(s.a,{children:["$",y.shippingPrice]})]})}),Object(f.jsx)(c.a.Item,{children:Object(f.jsxs)(a.a,{children:[Object(f.jsx)(s.a,{children:"Tax"}),Object(f.jsxs)(s.a,{children:["$",y.taxPrice]})]})}),Object(f.jsx)(c.a.Item,{children:Object(f.jsxs)(a.a,{children:[Object(f.jsx)(s.a,{children:"Total"}),Object(f.jsxs)(s.a,{children:["$",y.totalPrice]})]})}),Object(f.jsxs)(c.a.Item,{children:[A&&Object(f.jsx)(p.a,{}),S&&!S.isAdmin&&!y.isPaid&&Object(f.jsx)(c.a.Item,{children:Object(f.jsx)(d.a,{type:"button",className:"btn btn-block",onClick:z,children:"Pay Order"})}),S&&S.isAdmin&&!y.isPaid&&Object(f.jsx)(c.a.Item,{children:Object(f.jsx)(d.a,{type:"button",className:"btn btn-block",onClick:z,children:"Mark As Paid"})}),w&&Object(f.jsx)(p.a,{}),y.isPaid&&!y.isDelivered&&Object(f.jsx)(c.a.Item,{children:Object(f.jsx)(d.a,{type:"button",className:"btn btn-block",onClick:function(){x(Object(h.c)(y)),m.go(0)},children:"Mark As Delivered"})})]})]})})})]})]})}}}]);
//# sourceMappingURL=4.0c97e3fd.chunk.js.map