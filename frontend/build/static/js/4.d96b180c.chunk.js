(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{159:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return j}));var r=n(10),a=n(9),s=n.n(a),c=n(12),i=n.n(c),o=n(46),d=function(e,t){return function(){var n=Object(r.a)(s.a.mark((function n(r,a){var c,d;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.get("/api/goods/".concat(e));case 2:c=n.sent,d=c.data,r({type:o.a,payload:{product:d._id,name:d.goods_name,image:d.goods_pic,price:d.goods_price,countInStock:d.countInStock,qty:t}}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},u=function(e){return function(t,n){t({type:o.c,payload:e}),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems))}},p=function(){return function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("cartItems"),t({type:o.b});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l=function(e){return function(t){t({type:o.e,payload:e}),localStorage.setItem("shippingAddress",JSON.stringify(e))}},j=function(e){return function(t){t({type:o.d,payload:e}),localStorage.setItem("paymentMethod",JSON.stringify(e))}}},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return b}));var r=n(10),a=n(9),s=n.n(a),c=n(12),i=n.n(c),o=n(11),d=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(n,r){var a,c,d,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:o.b}),a=r(),c=a.userLogin.userInfo,d={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.post("/api/orders",e,d);case 6:u=t.sent,p=u.data,n({type:o.c,payload:p}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:o.a,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},u=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(n,r){var a,c,d,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:o.l}),a=r(),c=a.userLogin.userInfo,d={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.get("/api/orders/".concat(e),d);case 6:u=t.sent,p=u.data,n({type:o.m,payload:p}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:o.k,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(n,r){var a,c,d,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:o.v}),a=r(),c=a.userLogin.userInfo,d={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.put("/api/orders/".concat(e._id,"/pay"),{},d);case 6:u=t.sent,p=u.data,n({type:o.x,payload:p}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:o.u,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(n,r){var a,c,d,u,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:o.h}),a=r(),c=a.userLogin.userInfo,d={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.put("/api/orders/".concat(e._id,"/delivered"),{},d);case 6:u=t.sent,p=u.data,n({type:o.j,payload:p}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:o.g,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message}),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},j=function(){return function(){var e=Object(r.a)(s.a.mark((function e(t,n){var r,a,c,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:o.p}),r=n(),a=r.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(a.token)}},e.next=6,i.a.get("/api/orders/myorders",c);case 6:d=e.sent,u=d.data,t({type:o.r,payload:u}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:o.o,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},h=function(){return function(){var e=Object(r.a)(s.a.mark((function e(t,n){var r,a,c,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:o.s}),r=n(),a=r.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(a.token)}},e.next=6,i.a.get("/api/orders",c);case 6:d=e.sent,u=d.data,t({type:o.t,payload:u}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:o.n,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(n,r){var a,c,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:o.e}),a=r(),c=a.userLogin.userInfo,d={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,i.a.delete("/api/orders/".concat(e),d);case 6:n({type:o.f}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:o.d,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}},166:function(e,t,n){"use strict";var r=n(2),a=n(3),s=n(5),c=n.n(s),i=n(0),o=n.n(i),d=(n(45),n(31)),u=n(6),p=n(78),l=n(77),j=n(22),h={variant:void 0,active:!1,disabled:!1},b=o.a.forwardRef((function(e,t){var n=e.bsPrefix,s=e.active,d=e.disabled,p=e.className,h=e.variant,b=e.action,f=e.as,m=e.eventKey,O=e.onClick,x=Object(a.a)(e,["bsPrefix","active","disabled","className","variant","action","as","eventKey","onClick"]);n=Object(u.a)(n,"list-group-item");var v=Object(i.useCallback)((function(e){if(d)return e.preventDefault(),void e.stopPropagation();O&&O(e)}),[d,O]);return o.a.createElement(l.a,Object(r.a)({ref:t},x,{eventKey:Object(j.b)(m,x.href),as:f||(b?x.href?"a":"button":"div"),onClick:v,className:c()(p,n,s&&"active",d&&"disabled",h&&n+"-"+h,b&&n+"-action")}))}));b.defaultProps=h,b.displayName="ListGroupItem";var f=b,m={variant:void 0,horizontal:void 0},O=o.a.forwardRef((function(e,t){var n,s=Object(d.a)(e,{activeKey:"onSelect"}),i=s.className,l=s.bsPrefix,j=s.variant,h=s.horizontal,b=s.as,f=void 0===b?"div":b,m=Object(a.a)(s,["className","bsPrefix","variant","horizontal","as"]),O=Object(u.a)(l,"list-group");return n=h?!0===h?"horizontal":"horizontal-"+h:null,o.a.createElement(p.a,Object(r.a)({ref:t},m,{as:f,className:c()(i,O,j&&O+"-"+j,n&&O+"-"+n)}))}));O.defaultProps=m,O.displayName="ListGroup",O.Item=f;t.a=O},181:function(e,t,n){"use strict";n.r(t);var r=n(30),a=n(0),s=n(152),c=n(99),i=n(166),o=n(153),d=n(27),u=n(100),p=n(16),l=n(43),j=n(42),h=n(21),b=n(161),f=n(159),m=n(1);t.default=function(e){var t,n=e.match,O=e.history,x=n.params.id,v=Object(p.b)(),y=Object(a.useState)(null),g=Object(r.a)(y,2),k=g[0],I=g[1],w=Object(p.c)((function(e){return e.orderDetails})),P=w.order,A=w.loading,N=w.error,S=Object(p.c)((function(e){return e.orderDeliver})),z=S.loading,C=(S.success,Object(p.c)((function(e){return e.orderPay}))),L=C.loading,D=(C.success,C.error),B=Object(p.c)((function(e){return e.userLogin})).userInfo;if(!A){P.itemsPrice=(t=P.orderItems.reduce((function(e,t){return e+t.price*t.qty}),0),(Math.round(100*t)/100).toFixed(2))}Object(a.useEffect)((function(){B||O.push("/login"),D&&(O.go(0),I("Payment Failed! Check your wallet!")),v(Object(b.d)(x))}),[v,x,D,O,B]);var M=function(){v(Object(b.g)(P)),O.go(0),v(Object(f.b)())};return A?Object(m.jsx)(l.a,{}):N?Object(m.jsx)(j.a,{variant:"danger",children:N}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h1",{className:"mt-5",children:["Order",P._id]}),Object(m.jsxs)(s.a,{children:[Object(m.jsx)(c.a,{md:8,children:Object(m.jsxs)(i.a,{variant:"flush",children:[Object(m.jsxs)(i.a.Item,{children:[Object(m.jsx)("h2",{children:"Shipping"}),Object(m.jsxs)("p",{children:[" ",Object(m.jsx)("strong",{children:"Name: "})," ",P.user.name," "]}),Object(m.jsxs)("p",{children:[" ",Object(m.jsx)("strong",{children:"Email: "})," ",Object(m.jsx)("a",{href:"mailto: ".concat(P.user.email),children:P.user.email})]}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Address:"}),P.shippingAddress.address,", ",P.shippingAddress.city,","," ",P.shippingAddress.postalCode,","," ",P.shippingAddress.address,", ",P.shippingAddress.country]}),P.isDelivered?Object(m.jsxs)(j.a,{variant:"success",children:["Delivered on ",P.deliveredAt]}):Object(m.jsx)(j.a,{variant:"danger",children:"Not Delivered"})]}),Object(m.jsxs)(i.a.Item,{children:[Object(m.jsx)("h2",{children:"Payment Method"}),Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:"Method: "}),P.paymentMethod]}),P.isPaid?Object(m.jsxs)(j.a,{variant:"success",children:["Paid on ",P.paidAt]}):Object(m.jsx)(j.a,{variant:"danger",children:"Not Paid"})]}),Object(m.jsxs)(i.a.Item,{children:[Object(m.jsx)("h2",{children:"Order Items"}),0===P.orderItems.length?Object(m.jsx)(j.a,{children:"Order Is Empty"}):Object(m.jsx)(i.a,{variant:"flush",children:P.orderItems.map((function(e,t){return Object(m.jsx)(i.a.Item,{children:Object(m.jsxs)(s.a,{children:[Object(m.jsx)(c.a,{md:1,children:Object(m.jsx)(o.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(m.jsx)(c.a,{children:Object(m.jsx)(h.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(m.jsxs)(c.a,{md:4,children:[e.qty," x ",e.price," = $",e.qty*e.price]})]})},t)}))})]})]})}),Object(m.jsx)(c.a,{md:4,children:Object(m.jsx)(d.a,{children:Object(m.jsxs)(i.a,{variant:"flush",children:[Object(m.jsx)(i.a.Item,{children:Object(m.jsx)("h2",{children:"Order Summary"})}),Object(m.jsx)(i.a.Item,{children:Object(m.jsxs)(s.a,{children:[Object(m.jsx)(c.a,{children:"Items"}),Object(m.jsxs)(c.a,{children:["$",P.itemsPrice]})]})}),Object(m.jsx)(i.a.Item,{children:Object(m.jsxs)(s.a,{children:[Object(m.jsx)(c.a,{children:"Shipping"}),Object(m.jsxs)(c.a,{children:["$",P.shippingPrice]})]})}),Object(m.jsx)(i.a.Item,{children:Object(m.jsxs)(s.a,{children:[Object(m.jsx)(c.a,{children:"Tax"}),Object(m.jsxs)(c.a,{children:["$",P.taxPrice]})]})}),Object(m.jsx)(i.a.Item,{children:Object(m.jsxs)(s.a,{children:[Object(m.jsx)(c.a,{children:"Total"}),Object(m.jsxs)(c.a,{children:["$",P.totalPrice]})]})}),Object(m.jsxs)(i.a.Item,{children:[L&&Object(m.jsx)(l.a,{}),B&&!B.isAdmin&&!P.isPaid&&Object(m.jsx)(i.a.Item,{children:Object(m.jsx)(u.a,{type:"button",className:"btn btn-block",onClick:M,children:"Pay Order"})}),B&&B.isAdmin&&!P.isPaid&&Object(m.jsx)(i.a.Item,{children:Object(m.jsx)(u.a,{type:"button",className:"btn btn-block",onClick:M,children:"Mark As Paid"})}),z&&Object(m.jsx)(l.a,{}),P.isPaid&&!P.isDelivered&&Object(m.jsx)(i.a.Item,{children:Object(m.jsx)(u.a,{type:"button",className:"btn btn-block",onClick:function(){v(Object(b.c)(P)),O.go(0)},children:"Mark As Delivered"})})]}),k&&Object(m.jsx)(j.a,{variant:"danger",children:k})]})})})]})]})}}}]);
//# sourceMappingURL=4.d96b180c.chunk.js.map