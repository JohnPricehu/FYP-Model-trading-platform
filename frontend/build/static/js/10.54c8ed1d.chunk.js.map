{"version":3,"sources":["actions/orderAction.js","../node_modules/react-bootstrap/esm/Table.js","views/OrderListScreen.js"],"names":["createOrder","order","dispatch","getState","a","type","ORDER_CREATED_REQUEST","userInfo","userLogin","config","headers","Authorization","token","axios","post","data","ORDER_CREATED_SUCCESS","payload","ORDER_CREATED_FAIL","response","message","getOrderDetails","id","ORDER_DETAILS_REQUEST","get","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAIL","payOrder","ORDER_PAY_REQUEST","put","_id","ORDER_PAY_SUCCESS","ORDER_PAY_FAIL","deliverOrder","ORDER_DELIVER_REQUEST","ORDER_DELIVER_SUCCESS","ORDER_DELIVER_FAIL","console","log","listMyOrders","ORDER_LIST_MY_REQUEST","ORDER_LIST_MY_SUCCESS","ORDER_LIST_MY_FAIL","listOrders","ORDER_LIST_REQUEST","ORDER_LIST_SUCCESS","ORDER_LIST_FAIL","deleteOrder","ORDER_DELETE_REQUEST","delete","ORDER_DELETE_SUCCESS","ORDER_DELETE_FAIL","Table","React","forwardRef","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","OrderListScreen","history","useDispatch","orderList","useSelector","state","loading","error","orders","delettOrder","orderLoading","orderError","orderSuccess","success","useEffect","isAdmin","push","map","onClick","window","confirm","user","name","createdAt","substring","totalPrice","isPaid","paidAt","style","color","isDelivered","deliveredAt","to"],"mappings":"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","file":"static/js/10.54c8ed1d.chunk.js","sourcesContent":["import axios from 'axios'\nimport {\n  ORDER_CREATED_REQUEST,\n  ORDER_CREATED_SUCCESS,\n  ORDER_CREATED_FAIL,\n  ORDER_DETAILS_REQUEST,\n  ORDER_DETAILS_SUCCESS,\n  ORDER_DETAILS_FAIL,\n  ORDER_PAY_REQUEST,\n  ORDER_PAY_SUCCESS,\n  ORDER_PAY_FAIL,\n  ORDER_LIST_MY_REQUEST,\n  ORDER_LIST_MY_SUCCESS,\n  ORDER_LIST_MY_FAIL,\n  ORDER_LIST_REQUEST,\n  ORDER_LIST_SUCCESS,\n  ORDER_LIST_FAIL,\n  ORDER_DELIVER_SUCCESS,\n  ORDER_DELIVER_REQUEST,\n  ORDER_DELIVER_FAIL,\n  ORDER_DELETE_FAIL,\n  ORDER_DELETE_SUCCESS,\n  ORDER_DELETE_REQUEST,\n} from '../constants/orderConstants'\n\nexport const createOrder = (order) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_CREATED_REQUEST,\n    })\n    const {\n      userLogin: { userInfo },\n    } = getState()\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n    const { data } = await axios.post(`/api/orders`, order, config)\n    dispatch({\n      type: ORDER_CREATED_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: ORDER_CREATED_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n\nexport const getOrderDetails = (id) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_DETAILS_REQUEST,\n    })\n    const {\n      userLogin: { userInfo },\n    } = getState()\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n    const { data } = await axios.get(`/api/orders/${id}`, config)\n    dispatch({\n      type: ORDER_DETAILS_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: ORDER_DETAILS_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n\nexport const payOrder = (order, \n  // paymentResult\n  ) => async (\n  dispatch,\n  getState\n) => {\n  try {\n    dispatch({\n      type: ORDER_PAY_REQUEST,\n    })\n    const {\n      userLogin: { userInfo },\n    } = getState()\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n    const { data } = await axios.put(\n      `/api/orders/${order._id}/pay`,\n      {},\n      // paymentResult,\n      config\n    )\n    dispatch({\n      type: ORDER_PAY_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: ORDER_PAY_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n\nexport const deliverOrder = (order) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_DELIVER_REQUEST,\n    })\n    const {\n      userLogin: { userInfo },\n    } = getState()\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n    const { data } = await axios.put(\n      `/api/orders/${order._id}/delivered`,\n      {},\n      config\n    )\n    dispatch({\n      type: ORDER_DELIVER_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: ORDER_DELIVER_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n    console.log(error)\n  }\n}\n\nexport const listMyOrders = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_LIST_MY_REQUEST,\n    })\n    const {\n      userLogin: { userInfo },\n    } = getState()\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n    const { data } = await axios.get(`/api/orders/myorders`, config)\n    dispatch({\n      type: ORDER_LIST_MY_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: ORDER_LIST_MY_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n\nexport const listOrders = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_LIST_REQUEST,\n    })\n    const {\n      userLogin: { userInfo },\n    } = getState()\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n    const { data } = await axios.get(`/api/orders`, config)\n    dispatch({\n      type: ORDER_LIST_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: ORDER_LIST_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n\nexport const deleteOrder = (id) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: ORDER_DELETE_REQUEST,\n    })\n    const {\n      userLogin: { userInfo },\n    } = getState()\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n    await axios.delete(`/api/orders/${id}`, config)\n    dispatch({\n      type: ORDER_DELETE_SUCCESS,\n    })\n  } catch (error) {\n    dispatch({\n      type: ORDER_DELETE_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","/* eslint-disable react-hooks/rules-of-hooks */\nimport React, { useEffect } from 'react'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport { Button, Table } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport ErrorMessage from '../components/ErrorMessage'\nimport Loading from '../components/Loading'\nimport { listOrders, deleteOrder } from '../actions/orderAction'\n\nconst OrderListScreen = ({ history }) => {\n  const dispatch = useDispatch()\n\n  const orderList = useSelector((state) => state.orderList)\n  const { loading, error, orders } = orderList\n\n  const userLogin = useSelector((state) => state.userLogin)\n  const { userInfo } = userLogin\n\n  const delettOrder = useSelector((state) => state.delettOrder)\n  const {\n    loading: orderLoading,\n    error: orderError,\n    success: orderSuccess,\n  } = delettOrder\n\n  useEffect(() => {\n    if (userInfo && userInfo.isAdmin) {\n      dispatch(listOrders())\n    } else {\n      history.push('/login')\n    }\n  }, [dispatch, history, userInfo, orderSuccess])\n\n  const deleteHandler = (id) => {\n    if (window.confirm('Are you sure?')) {\n      dispatch(deleteOrder(id))\n    }\n  }\n\n  return (\n    <>\n      <h1 className='mt-5'>Orders List</h1>\n      {orderLoading && <Loading />}\n      {orderError && <ErrorMessage variant='danger'>{orderError}</ErrorMessage>}\n      {loading ? (\n        <Loading />\n      ) : error ? (\n        <ErrorMessage variant='danger'>{error}</ErrorMessage>\n      ) : (\n        <Table striped bordered hover responsive className='tabel-sm'>\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>USER</th>\n              <th>DATE</th>\n              <th>TOTAL</th>\n              <th>PAID</th>\n              <th>DELIVERD</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map((order) => (\n              <tr key={order._id}>\n                <td>\n                  <Button\n                    variant='danger'\n                    className='btn-sm'\n                    onClick={() => deleteHandler(order._id)}\n                  >\n                    <i className='fas fa-trash'>{order._id}</i>\n                  </Button>\n                </td>\n                <td>{order.user && order.user.name}</td>\n                <td>{order.createdAt.substring(0, 10)}</td>\n                <td>${order.totalPrice}</td>\n                <td>\n                  {order.isPaid ? (\n                    order.paidAt\n                  ) : (\n                    <i className='fas fa-times' style={{ color: 'red' }}>No</i>\n                  )}\n                </td>\n\n                <td>\n                  {order.isDelivered ? (\n                    order.deliveredAt\n                  ) : (\n                    <i className='fas fa-times' style={{ color: 'red' }}>No</i>\n                  )}\n                </td>\n\n                <td>\n                  <LinkContainer to={`/order/${order._id}`}>\n                    <Button variant='light' className='btn-sm'>\n                      Details\n                    </Button>\n                  </LinkContainer>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )}\n    </>\n  )\n}\n\nexport default OrderListScreen\n"],"sourceRoot":""}