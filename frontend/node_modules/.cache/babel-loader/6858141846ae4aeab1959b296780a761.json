{"ast":null,"code":"var _jsxFileName = \"D:\\\\FYP demo\\\\frontend\\\\src\\\\views\\\\sell-goods-page.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\"; // import MainScreen from \"../../components/MainScreen\";\n\nimport { Button, Card, Form } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { createGoodsAction } from \"../actions/goodsActions\";\nimport Loading from \"../components/Loading\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport ReactMarkdown from \"react-markdown\";\nimport projectStyles from '../style.module.css';\nimport styles from './sell-goods-page.module.css';\nimport { Helmet } from 'react-helmet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CreateGoods(_ref) {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  const [goods_name, setGoods_name] = useState(\"\");\n  const [goods_details, setGoods_details] = useState(\"\");\n  const [goods_category, setGoods_category] = useState(\"\");\n  const [goods_price, setGoods_price] = useState(\"\");\n  const [goods_pic, setGoods_pic] = useState(\"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\");\n  const [picMessage, setPicMessage] = useState(null);\n  const dispatch = useDispatch();\n  const goodsCreate = useSelector(state => state.goodsCreate);\n  const {\n    loading,\n    error,\n    goods\n  } = goodsCreate;\n  console.log(document.getElementsByTagName(\"input\"));\n\n  const resetHandler = () => {\n    setGoods_name(\"\");\n    setGoods_details(\"\");\n    setGoods_category(\"\");\n    setGoods_pic(\"\");\n    setGoods_pic(\"\");\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(createGoodsAction(goods_name, goods_details, goods_category, goods_pic, goods_price));\n    if (!goods_name || !goods_details || !goods_category || !goods_price) return;\n    resetHandler();\n    history.push(\"/\");\n  };\n\n  function previewFile() {\n    var preview = document.querySelector('img');\n    var file = document.querySelector('input[type=file]').files[0];\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      preview.src = reader.result;\n    };\n\n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      preview.src = \"\";\n    }\n  }\n\n  const postDetails = pics => {\n    if (pics === \"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\") {\n      return setPicMessage(\"Please Select an Image\");\n    }\n\n    setPicMessage(null);\n\n    if (pics.type === \"image/jpeg\" || pics.type === \"image/png\") {\n      const data = new FormData();\n      data.append(\"file\", pics);\n      data.append(\"upload_preset\", \"goods_pic\");\n      data.append(\"cloud_name\", \"fyp2022\");\n      fetch(\"https://api.cloudinary.com/v1_1/fyp2022/image/upload\", {\n        method: \"post\",\n        body: data\n      }).then(res => res.json()).then(data => {\n        setGoods_pic(data.url.toString());\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      return setPicMessage(\"Please Select an Image\");\n    }\n  };\n\n  useEffect(() => {}, []);\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: submitHandler,\n    children: [error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['container'],\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        children: [/*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"sellGoodsPage - FYP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"og:title\",\n          content: \"sellGoodsPage - FYP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"goods_pic\",\n        value: goods_pic,\n        type: \"file\",\n        label: \"Upload Profile Picture\",\n        custom: true,\n        accept: \"image/*\" // placeholder=\"Upload Profile Picture\"\n        ,\n        onChange: e => postDetails(e.target.files[0]),\n        className: ` ${styles['textinput']} ${projectStyles['input']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"image\",\n        src: \"\",\n        className: styles['image']\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text'],\n        children: \"goods name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: goods_name,\n        placeholder: \"Enter the goods's name\",\n        onChange: e => setGoods_name(e.target.value),\n        className: ` ${styles['textinput1']} ${projectStyles['input']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text1'],\n        children: \"goods price:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: goods_price,\n        placeholder: \"Enter the goods's price\",\n        onChange: e => setGoods_price(e.target.value),\n        className: ` ${styles['textinput2']} ${projectStyles['input']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text2'],\n        children: \"goods category:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"content\",\n        value: goods_category,\n        placeholder: \"Enter the Category\",\n        onChange: e => setGoods_category(e.target.value),\n        className: ` ${styles['textinput3']} ${projectStyles['input']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text3'],\n        children: \"goods details:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: goods_details,\n        placeholder: \"Enter the goods more details\",\n        rows: 4,\n        onChange: e => setGoods_details(e.target.value),\n        className: ` ${styles['textarea']} ${projectStyles['textarea']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }, this), goods_details && /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          children: \"Note Preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            children: goods_details\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loading, {\n        size: 50\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: ` ${styles['button']} ${projectStyles['button']} `,\n        type: \"submit\",\n        variant: \"primary\",\n        children: \"Add a new goods\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: ` ${styles['button1']} ${projectStyles['button']} `,\n        onClick: resetHandler,\n        variant: \"danger\",\n        children: \"Reset Feilds\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text4'],\n        children: [\"Creating on - \", new Date().toLocaleDateString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 11\n  }, this);\n}\n\n_s(CreateGoods, \"U0NUjNM7zABIjJCFdwGr8qd81xM=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = CreateGoods;\nexport default CreateGoods;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateGoods\");","map":{"version":3,"sources":["D:/FYP demo/frontend/src/views/sell-goods-page.js"],"names":["React","useEffect","useState","Button","Card","Form","useDispatch","useSelector","createGoodsAction","Loading","ErrorMessage","ReactMarkdown","projectStyles","styles","Helmet","CreateGoods","history","goods_name","setGoods_name","goods_details","setGoods_details","goods_category","setGoods_category","goods_price","setGoods_price","goods_pic","setGoods_pic","picMessage","setPicMessage","dispatch","goodsCreate","state","loading","error","goods","console","log","document","getElementsByTagName","resetHandler","submitHandler","e","preventDefault","push","previewFile","preview","querySelector","file","files","reader","FileReader","onloadend","src","result","readAsDataURL","postDetails","pics","type","data","FormData","append","fetch","method","body","then","res","json","url","toString","catch","err","target","value","Date","toLocaleDateString"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n// import MainScreen from \"../../components/MainScreen\";\nimport { Button, Card, Form } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {createGoodsAction} from \"../actions/goodsActions\";\nimport Loading from \"../components/Loading\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport ReactMarkdown from \"react-markdown\";\nimport projectStyles from '../style.module.css'\nimport styles from './sell-goods-page.module.css'\nimport { Helmet } from 'react-helmet'\n\nfunction CreateGoods({ history }) {\n  const [goods_name, setGoods_name] = useState(\"\");\n  const [goods_details, setGoods_details] = useState(\"\");\n  const [goods_category, setGoods_category] = useState(\"\");\n  const [goods_price, setGoods_price] = useState(\"\");\n  const [goods_pic, setGoods_pic] = useState(\n    \"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\"\n  );\n  const [picMessage, setPicMessage] = useState(null);\n\n  const dispatch = useDispatch();\n\n  const goodsCreate = useSelector((state) => state.goodsCreate);\n  const { loading, error, goods } = goodsCreate;\n\n\n  console.log(document.getElementsByTagName(\"input\"))\n\n  const resetHandler = () => {\n    setGoods_name(\"\");\n    setGoods_details(\"\");\n    setGoods_category(\"\");\n    setGoods_pic(\"\");\n    setGoods_pic(\"\");\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(createGoodsAction(goods_name, goods_details, goods_category, goods_pic,goods_price));\n    if (!goods_name || !goods_details || !goods_category || !goods_price) return;\n\n    resetHandler();\n    history.push(\"/\");\n  };\n  function previewFile() {\n    var preview = document.querySelector('img');\n    var file    = document.querySelector('input[type=file]').files[0];\n    var reader  = new FileReader();\n  \n    reader.onloadend = function () {\n      preview.src = reader.result;\n    }\n  \n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      preview.src = \"\";\n    }\n  }\n  const postDetails = (pics) => {\n    if (\n      pics ===\n      \"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\"\n    ) {\n      return setPicMessage(\"Please Select an Image\");\n    }\n    setPicMessage(null);\n    if (pics.type === \"image/jpeg\" || pics.type === \"image/png\") {\n      const data = new FormData();\n      data.append(\"file\", pics);\n      data.append(\"upload_preset\", \"goods_pic\");\n      data.append(\"cloud_name\", \"fyp2022\");\n      fetch(\"https://api.cloudinary.com/v1_1/fyp2022/image/upload\", {\n        method: \"post\",\n        body: data,\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setGoods_pic(data.url.toString());\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      return setPicMessage(\"Please Select an Image\");\n    }\n  };\n\n  useEffect(() => {}, []);\n\n  return (\n          <Form onSubmit={submitHandler}>\n            {error && <ErrorMessage variant=\"danger\">{error}</ErrorMessage>}\n\n      <div className={styles['container']}>\n      <Helmet>\n        <title>sellGoodsPage - FYP</title>\n        <meta property=\"og:title\" content=\"sellGoodsPage - FYP\" />\n      </Helmet>\n      <input \n        id = \"goods_pic\"                   \n        value={goods_pic}\n        type=\"file\"\n        label=\"Upload Profile Picture\"\n        custom\n        accept=\"image/*\"\n        // placeholder=\"Upload Profile Picture\"\n        onChange={(e) => postDetails(e.target.files[0])}      \n        className={` ${styles['textinput']} ${projectStyles['input']} `}\n      />\n      <img\n        alt=\"image\"\n        src=\"\"\n        className={styles['image']}\n      />\n      <span className={styles['text']}>goods name:</span>\n      <input\n        type=\"text\"\n        value={goods_name}\n        placeholder=\"Enter the goods's name\"\n        onChange={(e) => setGoods_name(e.target.value)}\n        className={` ${styles['textinput1']} ${projectStyles['input']} `}\n      />\n      <span className={styles['text1']}>goods price:</span>\n      <input\n        type=\"text\"\n        value={goods_price}\n        placeholder=\"Enter the goods's price\"\n        onChange={(e) => setGoods_price(e.target.value)}\n        className={` ${styles['textinput2']} ${projectStyles['input']} `}\n      />\n      <span className={styles['text2']}>goods category:</span>\n      <input\n        type=\"content\"\n        value={goods_category}\n        placeholder=\"Enter the Category\"\n        onChange={(e) => setGoods_category(e.target.value)}\n        className={` ${styles['textinput3']} ${projectStyles['input']} `}\n      />\n      <span className={styles['text3']}>goods details:</span>\n      <textarea\n        value={goods_details}\n        placeholder=\"Enter the goods more details\"\n        rows={4}\n        onChange={(e) => setGoods_details(e.target.value)}\n        className={` ${styles['textarea']} ${projectStyles['textarea']} `}\n      ></textarea>\n        {goods_details && (\n              <Card>\n                <Card.Header>Note Preview</Card.Header>\n                <Card.Body>\n                  <ReactMarkdown>{goods_details}</ReactMarkdown>\n                </Card.Body>\n                </Card>\n            )}\n\n            {loading && <Loading size={50} />}\n      <button className={` ${styles['button']} ${projectStyles['button']} `}\n      type=\"submit\" variant=\"primary\">\n          Add a new goods\n      </button>\n      <button className={` ${styles['button1']} ${projectStyles['button']} `}\n      onClick={resetHandler} variant=\"danger\">\n        Reset Feilds\n      </button>\n      <span className={styles['text4']}>\n        Creating on - {new Date().toLocaleDateString()}\n      </span>\n    </div>\n    </Form>\n  );\n}\n\nexport default CreateGoods;"]},"metadata":{},"sourceType":"module"}