{"ast":null,"code":"var _jsxFileName = \"D:\\\\FYP demo\\\\frontend\\\\src\\\\views\\\\sell-goods-page.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\"; // import MainScreen from \"../../components/MainScreen\";\n\nimport { Button, Card, Form } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { createGoodsAction } from \"../actions/goodsActions\";\nimport Loading from \"../components/Loading\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport ReactMarkdown from \"react-markdown\";\nimport projectStyles from '../style.module.css';\nimport styles from './sell-goods-page.module.css';\nimport { Helmet } from 'react-helmet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CreateGoods(_ref) {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  const [goods_name, setGoods_name] = useState(\"\");\n  const [goods_details, setGoods_details] = useState(\"\");\n  const [goods_category, setGoods_category] = useState(\"\");\n  const [goods_price, setGoods_price] = useState(\"\");\n  const [countInStock, setCountInStock] = useState(\"\");\n  const [goods_pic, setGoods_pic] = useState(\"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\");\n  const [picMessage, setPicMessage] = useState(null);\n  const dispatch = useDispatch();\n  const goodsCreate = useSelector(state => state.goodsCreate);\n  const {\n    loading,\n    error,\n    goods\n  } = goodsCreate;\n\n  const resetHandler = () => {\n    setGoods_name(\"\");\n    setGoods_details(\"\");\n    setGoods_category(\"\");\n    setGoods_price(\"\");\n    setGoods_pic(\"\");\n    setCountInStock(\"1\");\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(createGoodsAction(goods_name, goods_details, goods_category, goods_pic, goods_price, countInStock));\n    if (!goods_name || !goods_details || !goods_category || !goods_price) return;\n    resetHandler();\n    history.push(\"/\");\n  };\n\n  function previewFile() {\n    var preview = document.querySelector('img');\n    var file = document.querySelector('input[type=file]').files[0];\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      preview.src = reader.result;\n    };\n\n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      preview.src = \"\";\n    }\n  }\n\n  const postDetails = pics => {\n    if (pics === \"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\") {\n      return setPicMessage(\"Please Select an Image\");\n    }\n\n    setPicMessage(null);\n\n    if (pics.type === \"image/jpeg\" || pics.type === \"image/png\") {\n      const data = new FormData();\n      data.append(\"file\", pics);\n      data.append(\"upload_preset\", \"goods_pic\");\n      data.append(\"cloud_name\", \"fyp2022\");\n      fetch(\"https://api.cloudinary.com/v1_1/fyp2022/image/upload\", {\n        method: \"post\",\n        body: data\n      }).then(res => res.json()).then(data => {\n        setGoods_pic(data.url.toString());\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      return setPicMessage(\"Please Select an Image\");\n    }\n  };\n\n  useEffect(() => {}, []);\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: submitHandler,\n    children: [error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['container'],\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        children: [/*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"sellGoodsPage - FYP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          property: \"og:title\",\n          content: \"sellGoodsPage - FYP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: goods_pic,\n        type: \"file\",\n        label: \"Upload Profile Picture\",\n        custom: true,\n        accept: \"image/*\" // placeholder=\"Upload Profile Picture\"\n        ,\n        onChange: e => postDetails(e.target.files[0]),\n        className: ` ${styles['textinput']} ${projectStyles['input']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"image\",\n        src: goods_pic,\n        className: styles['image']\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text'],\n        children: \"goods name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: goods_name,\n        placeholder: \"Enter the goods's name\",\n        onChange: e => setGoods_name(e.target.value),\n        className: ` ${styles['textinput1']} ${projectStyles['input']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text1'],\n        children: \"goods price:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: goods_price,\n        placeholder: \"Enter the goods's price\",\n        onChange: e => setGoods_price(e.target.value),\n        className: ` ${styles['textinput2']} ${projectStyles['input']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text2'],\n        children: \"goods category:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        list: \"typelist\",\n        value: goods_category,\n        placeholder: \"Enter the Category\",\n        onChange: e => setGoods_category(e.target.value),\n        className: ` ${styles['textinput3']} ${projectStyles['input']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text5'],\n        children: \"goods count:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        type: \"select\",\n        value: countInStock,\n        placeholder: \"Enter the count\",\n        onChange: e => setCountInStock(e.target.value),\n        className: ` ${styles['textinput4']} ${projectStyles['input']} `,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"1\",\n          children: \"Other\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"2\",\n          children: \"Special\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text3'],\n        children: \"goods details:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: goods_details,\n        placeholder: \"Enter the goods more details\",\n        rows: 4,\n        onChange: e => setGoods_details(e.target.value),\n        className: ` ${styles['textarea']} ${projectStyles['textarea']} `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 7\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loading, {\n        size: 50\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: ` ${styles['button']} ${projectStyles['button']} `,\n        type: \"submit\",\n        variant: \"primary\",\n        children: \"Add a new goods\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: ` ${styles['button1']} ${projectStyles['button']} `,\n        onClick: resetHandler,\n        variant: \"danger\",\n        children: \"Reset Feilds\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles['text4'],\n        children: [\"Creating on - \", new Date().toLocaleDateString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 11\n  }, this);\n}\n\n_s(CreateGoods, \"qekO3CcRw6I/1lxB+I7PwLFqfwk=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = CreateGoods;\nexport default CreateGoods;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateGoods\");","map":{"version":3,"sources":["D:/FYP demo/frontend/src/views/sell-goods-page.js"],"names":["React","useEffect","useState","Button","Card","Form","useDispatch","useSelector","createGoodsAction","Loading","ErrorMessage","ReactMarkdown","projectStyles","styles","Helmet","CreateGoods","history","goods_name","setGoods_name","goods_details","setGoods_details","goods_category","setGoods_category","goods_price","setGoods_price","countInStock","setCountInStock","goods_pic","setGoods_pic","picMessage","setPicMessage","dispatch","goodsCreate","state","loading","error","goods","resetHandler","submitHandler","e","preventDefault","push","previewFile","preview","document","querySelector","file","files","reader","FileReader","onloadend","src","result","readAsDataURL","postDetails","pics","type","data","FormData","append","fetch","method","body","then","res","json","url","toString","catch","err","console","log","target","value","Date","toLocaleDateString"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n// import MainScreen from \"../../components/MainScreen\";\nimport { Button, Card, Form } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {createGoodsAction} from \"../actions/goodsActions\";\nimport Loading from \"../components/Loading\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport ReactMarkdown from \"react-markdown\";\nimport projectStyles from '../style.module.css'\nimport styles from './sell-goods-page.module.css'\nimport { Helmet } from 'react-helmet'\n\nfunction CreateGoods({ history }) {\n  const [goods_name, setGoods_name] = useState(\"\");\n  const [goods_details, setGoods_details] = useState(\"\");\n  const [goods_category, setGoods_category] = useState(\"\");\n  const [goods_price, setGoods_price] = useState(\"\");\n  const [countInStock, setCountInStock] = useState(\"\");\n  const [goods_pic, setGoods_pic] = useState(\n    \"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\"\n  );\n  const [picMessage, setPicMessage] = useState(null);\n\n  const dispatch = useDispatch();\n\n  const goodsCreate = useSelector((state) => state.goodsCreate);\n  const { loading, error, goods } = goodsCreate;\n\n  const resetHandler = () => {\n    setGoods_name(\"\");\n    setGoods_details(\"\");\n    setGoods_category(\"\");\n    setGoods_price(\"\");\n    setGoods_pic(\"\");\n    setCountInStock(\"1\");\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(createGoodsAction(goods_name, goods_details, goods_category, goods_pic,goods_price,countInStock));\n    if (!goods_name || !goods_details || !goods_category || !goods_price) return;\n\n    resetHandler();\n    history.push(\"/\");\n  };\n  function previewFile() {\n    var preview = document.querySelector('img');\n    var file    = document.querySelector('input[type=file]').files[0];\n    var reader  = new FileReader();\n  \n    reader.onloadend = function () {\n      preview.src = reader.result;\n    }\n  \n    if (file) {\n      reader.readAsDataURL(file);\n    } else {\n      preview.src = \"\";\n    }\n  }\n  const postDetails = (pics) => {\n    if (\n      pics ===\n      \"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\"\n    ) {\n      return setPicMessage(\"Please Select an Image\");\n    }\n    setPicMessage(null);\n    if (pics.type === \"image/jpeg\" || pics.type === \"image/png\") {\n      const data = new FormData();\n      data.append(\"file\", pics);\n      data.append(\"upload_preset\", \"goods_pic\");\n      data.append(\"cloud_name\", \"fyp2022\");\n      fetch(\"https://api.cloudinary.com/v1_1/fyp2022/image/upload\", {\n        method: \"post\",\n        body: data,\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          setGoods_pic(data.url.toString());\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      return setPicMessage(\"Please Select an Image\");\n    }\n  };\n\n  useEffect(() => {}, []);\n\n  return (\n          <Form onSubmit={submitHandler}>\n            {error && <ErrorMessage variant=\"danger\">{error}</ErrorMessage>}\n\n      <div className={styles['container']}>\n      <Helmet>\n        <title>sellGoodsPage - FYP</title>\n        <meta property=\"og:title\" content=\"sellGoodsPage - FYP\" />\n      </Helmet>\n      <input                    \n        id={goods_pic}\n        type=\"file\"\n        label=\"Upload Profile Picture\"\n        custom\n        accept=\"image/*\"\n        // placeholder=\"Upload Profile Picture\"\n        onChange={(e) => postDetails(e.target.files[0])}      \n        className={` ${styles['textinput']} ${projectStyles['input']} `}\n      />\n      <img\n        alt=\"image\"\n        src={goods_pic}\n        className={styles['image']}\n      />\n      <span className={styles['text']}>goods name:</span>\n      <input\n        type=\"text\"\n        value={goods_name}\n        placeholder=\"Enter the goods's name\"\n        onChange={(e) => setGoods_name(e.target.value)}\n        className={` ${styles['textinput1']} ${projectStyles['input']} `}\n      />\n      <span className={styles['text1']}>goods price:</span>\n      <input\n        type=\"text\"\n        value={goods_price}\n        placeholder=\"Enter the goods's price\"\n        onChange={(e) => setGoods_price(e.target.value)}\n        className={` ${styles['textinput2']} ${projectStyles['input']} `}\n      />\n      <span className={styles['text2']}>goods category:</span>\n      <input\n        type=\"text\"\n        list=\"typelist\"\n        value={goods_category}\n        placeholder=\"Enter the Category\"\n        onChange={(e) => setGoods_category(e.target.value)}\n        className={` ${styles['textinput3']} ${projectStyles['input']} `}\n      />\n      <span className={styles['text5']}>goods count:</span>\n      {/* <input\n        type=\"select\"\n        value={countInStock}\n        placeholder=\"Enter the count\"\n        onChange={(e) => setCountInStock(e.target.value)}\n        className={` ${styles['textinput4']} ${projectStyles['input']} `}\n      />\n        <datalist id=\"typelist\">\n　　      <option>Other</option>\n　　      <option>Special</option>\n        </datalist> */}\n      <select\n        type=\"select\"\n        value={countInStock}\n        placeholder=\"Enter the count\"\n        onChange={(e) => setCountInStock(e.target.value)}\n        className={` ${styles['textinput4']} ${projectStyles['input']} `}\n      >\n            <option value=\"1\">Other</option>\n            <option value=\"2\">Special</option>\n            </select>\n      <span className={styles['text3']}>goods details:</span>\n      <textarea\n        value={goods_details}\n        placeholder=\"Enter the goods more details\"\n        rows={4}\n        onChange={(e) => setGoods_details(e.target.value)}\n        className={` ${styles['textarea']} ${projectStyles['textarea']} `}\n      ></textarea>\n      {/* {goods_details && (\n              <Card>\n                <Card.Header>Detail Preview</Card.Header>\n                <Card.Body>\n                  <ReactMarkdown>{goods_details}</ReactMarkdown>\n                </Card.Body>\n                </Card>\n            )} */}\n        \n\n            {loading && <Loading size={50} />}\n      <button className={` ${styles['button']} ${projectStyles['button']} `}\n      type=\"submit\" variant=\"primary\">\n          Add a new goods\n      </button>\n      <button className={` ${styles['button1']} ${projectStyles['button']} `}\n      onClick={resetHandler} variant=\"danger\">\n        Reset Feilds\n      </button>\n      <span className={styles['text4']}>\n        Creating on - {new Date().toLocaleDateString()}\n      </span>\n    </div>\n    </Form>\n  );\n}\n\nexport default CreateGoods;"]},"metadata":{},"sourceType":"module"}